
<!DOCTYPE html>
<html>
<head>
    <title>Stock Tracker - {{ symbol }}</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }
        h1 {
            color: #333;
        }
        .stock-data {
            margin: 30px 0;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .price {
            font-size: 3em;
            font-weight: bold;
            margin: 10px 0;
        }
        .change {
            font-size: 1.5em;
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
        }
        .positive {
            background-color: #d4edda;
            color: #155724;
        }
        .negative {
            background-color: #f8d7da;
            color: #721c24;
        }
        .last-update {
            font-size: 0.8em;
            color: #6c757d;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>{{ symbol }} Stock Tracker</h1>
    <div class="stock-data">
        <div id="price" class="price">Loading...</div>
        <div id="pct-change" class="change">-</div>
        <div class="last-update">Last update: <span id="last-update">-</span></div>
    </div>

    <script>
        // Connect to Socket.IO server
        const socket = io();
        
        // Listen for stock updates
        socket.on('stock_update', function(data) {
            // Update price
            document.getElementById('price').textContent = '$' + data.price.toFixed(2);
            
            // Update percentage change
            const pctChangeEl = document.getElementById('pct-change');
            const changeValue = data.pct_change;
            pctChangeEl.textContent = (changeValue > 0 ? '+' : '') + changeValue.toFixed(2) + '%';
            pctChangeEl.className = 'change ' + (changeValue >= 0 ? 'positive' : 'negative');
            
            // Update timestamp
            const now = new Date();
            document.getElementById('last-update').textContent = now.toLocaleTimeString();
        });
    </script>
</body>
</html>
        